/*
 *	tiny-bs-grid https://github.com/jeffhehe/tiny-bs-grid
 *  this works for TinyMCE5.* on Bootstrap 3.*
 *  Version: v0.4 mod 0.01 OnlineCreation (fr translation)
 *  Author: Jeff Wang + OnlineCreation
 *  Date: Jan 20, 2023 + Feb 24, 2023
 */
!function(){tinymce.PluginManager.add("bootstrap3grid",function(e,t){e.contentCSS.push(t+"/bootstrapgrid-style.css"),e.ui.registry.addToggleButton("bootstrap3grid",{text:"Colonnes",tooltip:"Système de grille",onAction:function(){var t="Insérer une grille",n=["12"],l="sm",s=e.selection.getNode(),a=jQuery(s).parents("div.row"),o=a.length>0;if(o){var r=a[0],p=jQuery(r).children("div"),d=p.length,c=[];if(d>0)for(n=[],i=0;i<d;i++){var u=jQuery(p[i]).attr("class").split(/\s+/),v=jQuery(p[i]).html();for(c.push(v),j=0;j<u.length;j++)if(/^col-.*/i.test(u[j])){0==j&&(u[0].indexOf("col-lg")>-1?l="lg":u[0].indexOf("col-sm")>-1?l="sm":u[0].indexOf("col-xs")>-1&&(l="xs"));var g=u[j].lastIndexOf("-"),m=u[j].substr(g+1);n.push(m)}}t="Modifier/supprimer la grille"}var x=[{type:"selectbox",name:"grid",label:"Grid",items:[{text:"1 Colonne",value:"12"},{text:"2 Colonnes (½:½)",value:"6,6"},{text:"2 Colonnes (⅔:⅓)",value:"8,4"},{text:"2 Colonnes (¾:¼)",value:"9,3"},{text:"2 Colonnes (⅓:⅔)",value:"4,8"},{text:"2 Colonnes (¾:¼)",value:"3,9"},{text:"3 Colonnes (⅓:⅓:⅓)",value:"4,4,4"},{text:"3 Colonnes (½:¼:¼)",value:"6,3,3"},{text:"3 Colonnes (¼:½:¼)",value:"3,6,3"},{text:"3 Colonnes (¼:¼:½)",value:"3,3,6"},{text:"4 Colonnes (¼:¼:¼:¼)",value:"3,3,3,3"}]}],b=[{type:"selectbox",name:"size",label:"(Avancé) Point de rupture",items:[{text:"Grand écran (>= 1200px)",value:"lg"},{text:"Écran de petit ordinateur (>= 992px)",value:"md"},{text:"Tablette (>= 768px)",value:"sm"},{text:"Téléphone (< 768px)",value:"xs"}]},{type:"checkbox",name:"leadingBreak",label:"Ajouter un saut de ligne"+(o?"(recommandé)":"")}],f={type:"tabpanel",tabs:[{title:"Grille",items:x},{title:"Paramètres avancés",items:b}]};o&&(f={type:"tabpanel",tabs:[{title:"Modifier la grille",items:x},{title:"Paramètres avancés",items:b},{title:"Supprimer la grille",items:[{type:"checkbox",name:"removeGrids",label:"Supprimer la grille"}]}]});e.windowManager.open({title:t,body:f,initialData:{size:l,grid:n.toString(),leadingBreak:!o},buttons:[{type:"submit",name:"submitBtn",text:o?"Modifier":"Insérer"},{type:"cancel",name:"cancelBtn",text:"Annuler"}],onSubmit:function(t){var i=t.getData(),n="",l="",s="<p>&nbsp;</p>";if(1==i.leadingBreak&&(n="<p>&nbsp;</p>"),1==i.removeGrids&&o)return l=c.join("<p>&nbsp;</p>"),jQuery(a).replaceWith(n+l+s),void t.close();!function(e){const t=e.length;if(o){if(d>0&&d<t){for(var n=0;n<d;n++)l+='<div class="col-'+i.size+"-"+e[n]+'">'+c.shift()+"</div>";for(var a=d;a<t;a++)l+='<div class="col-'+i.size+"-"+e[a]+'"><p>&nbsp;</p></div>'}else if(d>=t){for(var n=0;n<t;n++)l+='<div class="col-'+i.size+"-"+e[n]+'">'+c.shift()+"</div>";d>t&&(s="<p>&nbsp;</p><div>"+c.join("<p>&nbsp;</p>")+"</div><p>&nbsp;</p>")}}else for(var r=0;r<t;r++)l+='<div class="col-'+i.size+"-"+e[r]+'"><p>&nbsp;</p></div>'}(i.grid.split(",")),o?jQuery(a).replaceWith(n+'<div class="row">'+l+"</div>"+s):e.insertContent(n+'<div class="row">'+l+"</div>"+s),t.close()}})},onSetup:function(t){e.selection.selectorChanged("div.row",function(e){t.setActive(e)})}})})}();